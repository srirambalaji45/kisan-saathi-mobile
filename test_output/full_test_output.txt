
> digital-marketplace@1.0.0 test
> jest --verbose

PASS __tests__/integration/auth-flow.test.ts
  Authentication Flow - Integration Tests
    ‚úì completes full authentication flow: Login ‚Üí OTP ‚Üí Dashboard (22 ms)
    ‚úì integrates with backend auth API endpoint (5 ms)
    ‚úì handles backend authentication errors and propagates to UI (4 ms)

PASS __tests__/integration/i18n.test.ts
  i18n Integration Tests
    ‚úì integrates translation system across components (20 ms)
    ‚úì verifies i18n module is configured correctly (7 ms)

PASS __tests__/regression/api-contract.test.ts
  API Contract Regression Tests
    ‚úì maintains /send-otp API contract structure (22 ms)
    ‚úì regression: API endpoints have not changed (3 ms)
    ‚úì regression: request headers remain consistent (2 ms)

PASS __tests__/performance/api-response-times.test.ts
  Performance Tests - API Response Times
    ‚úì measures OTP API response time (66 ms)
    ‚úì tracks concurrent API calls performance (4 ms)
    ‚úì monitors data loading performance metrics (3 ms)
    ‚úì benchmarks authentication flow performance (3 ms)
  Performance Tests - Data Loading
    ‚úì measures list rendering performance with large datasets (3 ms)
    ‚úì benchmarks component render time (2 ms)

PASS __tests__/integration/navigation.test.ts
  Navigation Integration Tests
    ‚úì documents navigation module interactions (13 ms)
    ‚úì verifies navigation flow for farmer role (3 ms)
    ‚úì verifies navigation flow for buyer role (1 ms)

FAIL __tests__/functional/BuyerDashboard.test.tsx
  Buyer Dashboard - Functional Tests
    ‚úì renders buyer dashboard with title (450 ms)
    ‚úì displays welcome message for buyer (16 ms)
    ‚úï renders with correct background color (23 ms)

  ‚óè Buyer Dashboard - Functional Tests ‚Ä∫ renders with correct background color

    Unable to find an element with testID: buyer-dashboard

    [
      [36m<MockScreen />[39m,
      [36m<View>[39m
        [36m<View>[39m
          [36m<RCTScrollView>[39m
            [36m<View>[39m
              [36m<View[39m
                [33maccessible[39m=[32m{true}[39m
              [36m>[39m
                [36m<Text>[39m
                  [0mnav_buyer.dashboard[0m
                [36m</Text>[39m
              [36m</View>[39m
              [36m<View[39m
                [33maccessible[39m=[32m{true}[39m
              [36m>[39m
                [36m<Text>[39m
                  [0mnav_buyer.browse_crops[0m
                [36m</Text>[39m
              [36m</View>[39m
              [36m<View[39m
                [33maccessible[39m=[32m{true}[39m
              [36m>[39m
                [36m<Text>[39m
                  [0mnav_buyer.live_auctions[0m
                [36m</Text>[39m
              [36m</View>[39m
              [36m<View[39m
                [33maccessible[39m=[32m{true}[39m
              [36m>[39m
                [36m<Text>[39m
                  [0mnav_buyer.my_bids[0m
                [36m</Text>[39m
              [36m</View>[39m
              [36m<View[39m
                [33maccessible[39m=[32m{true}[39m
              [36m>[39m
                [36m<Text>[39m
                  [0mnav_buyer.market_insights[0m
                [36m</Text>[39m
              [36m</View>[39m
            [36m</View>[39m
          [36m</RCTScrollView>[39m
          [36m<View>[39m
            [36m<View[39m
              [33maccessible[39m=[32m{true}[39m
            [36m>[39m
              [36m<Ionicons />[39m
            [36m</View>[39m
          [36m</View>[39m
        [36m</View>[39m
        [36m<RCTScrollView>[39m
          [36m<View>[39m
            [36m<Text>[39m
              [0mbuyer.dashboard_title[0m
            [36m</Text>[39m
            [36m<View>[39m
              [36m<Text>[39m
                [0mbuyer.welcome_msg[0m
              [36m</Text>[39m
              [36m<Text>[39m
                [0mbuyer.welcome_sub[0m
              [36m</Text>[39m
            [36m</View>[39m
          [36m</View>[39m
        [36m</RCTScrollView>[39m
      [36m</View>[39m,
    ]

      21 |
      22 |         // The container should have a specific background color
    > 23 |         const container = getByTestId('buyer-dashboard') || { props: { style: { backgroundColor: '#f5f8fa' } } };
         |                           ^
      24 |         // This is a basic test to ensure the component renders
      25 |         expect(container).toBeTruthy();
      26 |     });

      at Object.getByTestId (__tests__/functional/BuyerDashboard.test.tsx:23:27)

PASS __tests__/regression/baseline-snapshots.test.tsx
  Baseline Snapshot Tests - Regression
    ‚úì matches Login screen snapshot (469 ms)
    ‚úì matches Farmer Dashboard snapshot (252 ms)
    ‚úì matches Buyer Dashboard snapshot (22 ms)
    ‚úì verifies Login screen structure has not changed (18 ms)
    ‚úì regression: farmer dashboard maintains all action cards (24 ms)

FAIL __tests__/ui/layout-rendering.test.tsx
  UI Layout and Rendering Tests
    Login Screen UI
      ‚úì renders all UI components correctly (528 ms)
      ‚úì renders phone input with country code (11 ms)
      ‚úì displays branding elements correctly (12 ms)
    Dashboard UI Layout
      ‚úì farmer dashboard renders with proper structure (215 ms)
      ‚úì buyer dashboard renders with proper structure (14 ms)
    Component Rendering Tests
      ‚úì all screens render without errors (36 ms)
      ‚úì navigation components are integrated correctly (32 ms)
    Responsive Layout
      ‚úï login screen adapts to different container sizes (8 ms)
      ‚úì dashboard layouts are scrollable (34 ms)

  ‚óè UI Layout and Rendering Tests ‚Ä∫ Responsive Layout ‚Ä∫ login screen adapts to different container sizes

    'container' property has been renamed to 'UNSAFE_root'.

    Consider using 'root' property which returns root host element.

      87 |     describe('Responsive Layout', () => {
      88 |         it('login screen adapts to different container sizes', () => {
    > 89 |             const { container } = render(<LoginScreen />);
         |                     ^
      90 |             expect(container).toBeTruthy();
      91 |         });
      92 |

      at Object.get (node_modules/@testing-library/react-native/src/render.tsx:150:13)
      at Object.container (__tests__/ui/layout-rendering.test.tsx:89:21)

FAIL __tests__/functional/FarmerDashboard.test.tsx
  Farmer Dashboard - Functional Tests
    ‚úì renders dashboard with title (779 ms)
    ‚úì displays welcome message and subtitle (39 ms)
    ‚úì shows all quick action cards (37 ms)
    ‚úï navigates to add-crop screen when action card clicked (29 ms)
    ‚úï navigates to my-listings screen when action card clicked (19 ms)
    ‚úï navigates to mandi-prices screen when action card clicked (21 ms)

  ‚óè Farmer Dashboard - Functional Tests ‚Ä∫ navigates to add-crop screen when action card clicked

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/add-crop"

    Number of calls: 0

      37 |         fireEvent.press(addCropButton);
      38 |
    > 39 |         expect(mockRouter.push).toHaveBeenCalledWith('/add-crop');
         |                                 ^
      40 |     });
      41 |
      42 |     it('navigates to my-listings screen when action card clicked', () => {

      at Object.toHaveBeenCalledWith (__tests__/functional/FarmerDashboard.test.tsx:39:33)

  ‚óè Farmer Dashboard - Functional Tests ‚Ä∫ navigates to my-listings screen when action card clicked

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/my-listings"

    Number of calls: 0

      47 |         fireEvent.press(myListingsButton);
      48 |
    > 49 |         expect(mockRouter.push).toHaveBeenCalledWith('/my-listings');
         |                                 ^
      50 |     });
      51 |
      52 |     it('navigates to mandi-prices screen when action card clicked', () => {

      at Object.toHaveBeenCalledWith (__tests__/functional/FarmerDashboard.test.tsx:49:33)

  ‚óè Farmer Dashboard - Functional Tests ‚Ä∫ navigates to mandi-prices screen when action card clicked

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/mandi-prices"

    Number of calls: 0

      57 |         fireEvent.press(mandiPricesButton);
      58 |
    > 59 |         expect(mockRouter.push).toHaveBeenCalledWith('/mandi-prices');
         |                                 ^
      60 |     });
      61 | });
      62 |

      at Object.toHaveBeenCalledWith (__tests__/functional/FarmerDashboard.test.tsx:59:33)

FAIL __tests__/functional/Login.test.tsx
  Login Screen - Functional Tests
    ‚úì renders login screen with all elements (448 ms)
    ‚úì validates phone number format correctly (38 ms)
    ‚úì accepts only 10-digit numeric phone numbers (19 ms)
    ‚úì sends OTP request on valid phone submission (122 ms)
    ‚úì shows loading state while sending OTP (28 ms)
    ‚úì handles API error gracefully (82 ms)
    ‚úï disables continue button during API call (1050 ms)

  ‚óè Login Screen - Functional Tests ‚Ä∫ disables continue button during API call

    Unable to find node on an unmounted component.

      124 |
      125 |         // Button should be disabled during loading
    > 126 |         await waitFor(() => {
          |                      ^
      127 |             expect(continueButton.props.disabled).toBe(true);
      128 |         });
      129 |     });

      at Object.<anonymous> (__tests__/functional/Login.test.tsx:126:22)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

Snapshot Summary
 ‚Ä∫ 1 snapshot file obsolete from 1 test suite. To remove it, run `npm test -- -u`.
   ‚Ü≥   ‚Ä¢ test_output/snapshots/baseline-snapshots.test.tsx.snap

Test Suites: 4 failed, 6 passed, 10 total
Tests:       6 failed, 41 passed, 47 total
Snapshots:   1 file obsolete, 3 passed, 3 total
Time:        4.089 s, estimated 14 s
Ran all test suites.
